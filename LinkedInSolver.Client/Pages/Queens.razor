@page "/queens"
@using LinkedInSolver.Client.Models
@using LinkedInSolver.Client.Components

<PageTitle>@puzzle.Name - LinkedIn Puzzles</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudBreadcrumbs Items="_breadcrumbItems" Class="mb-4"></MudBreadcrumbs>

    <div class="d-flex align-center mb-4">
        <img src="@puzzle.Icon" alt="@puzzle.Name" style="width: 48px; height: 48px; margin-right: 16px;" />
        <MudText Typo="Typo.h4" GutterBottom="false">
            @puzzle.Name
        </MudText>
    </div>

    <PuzzleGrid
        CurrentGrid="grid"
        OnGridChanged="OnGridChanged"
        OnCellClicked="OnCellClicked"
        PuzzleName="@puzzle.Name" />
</MudContainer>

@code {
    private static readonly Puzzle puzzle = Puzzle.GetPuzzle("Queens");
    [Inject] private NavigationManager Navigation { get; set; } = default!;
    private List<BreadcrumbItem> _breadcrumbItems = new List<BreadcrumbItem>
    {
        new BreadcrumbItem("Home", href: "/", icon: Icons.Material.Filled.Home),
        new BreadcrumbItem(puzzle.Name, href: null, disabled: true)
    };
    private QueensGrid grid = new(Grid.DEFAULT_SIZE);

    private void OnGridChanged(Grid newGrid)
    {
        // Create a new QueensGrid with the same size as the newGrid
        grid = new QueensGrid(newGrid.Size);
    }

    private void OnCellClicked((int row, int col) cellPosition)
    {
        // Handle cell click specific to Queens puzzle if needed
        // For now, the grid component handles the toggle
    }
}
