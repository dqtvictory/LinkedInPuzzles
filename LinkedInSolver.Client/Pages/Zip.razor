@page "/zip"
@using LinkedInSolver.Client.Models
@using LinkedInSolver.Client.Components

<PuzzleGrid CurrentPuzzle="puzzle" CurrentGrid="grid" GetBorderClasses="getBorderClasses" />

@code {
    private static readonly Puzzle puzzle = Puzzle.GetPuzzle("Zip");
    
    [Inject] private NavigationManager Navigation { get; set; } = default!;
    private ZipGrid grid = new(Grid.DEFAULT_SIZE);

    private List<string> getBorderClasses(Pos pos)
    {
        var wallClasses = new List<string>();
        if (grid.GetHasRightWall(pos)) wallClasses.Add("right-wall");
        if (grid.GetHasBottomWall(pos)) wallClasses.Add("bottom-wall");

        // Add corresponding walls on adjacent cells to avoid holes
        if (pos.Col > 0 && grid.GetHasRightWall(pos.GetNeighbor(Pos.Direction.Left))) wallClasses.Add("left-wall");
        if (pos.Row > 0 && grid.GetHasBottomWall(pos.GetNeighbor(Pos.Direction.Up))) wallClasses.Add("top-wall");

        return wallClasses;
    }
}
